<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
	<meta http-equiv="content-language" content="en">
	<meta http-equiv="Cache-Control" content="no-cache">
	<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Gateway Service Configuration</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <meta name="description" content="Telstra Configuration">
    <meta name="author" content="Telstra">


   <!-- Le styles -->
    <link href="{{STATIC_URL}}TelstraApp/css/bootstrap.min.css" rel="stylesheet" />
    <link href="{{STATIC_URL}}TelstraApp/css/bootstrap-responsive.min.css" rel="stylesheet" />
	  <link href="{{STATIC_URL}}TelstraApp/css/font-awesome.min.css" rel="stylesheet" >
    <link href="{{STATIC_URL}}TelstraApp/css/telstra.css" rel="stylesheet" />
    <link href="{{STATIC_URL}}TelstraApp/css/bootstrap-toggle-buttons.css" rel="stylesheet" />
    <link href="{{STATIC_URL}}TelstraApp/css/bootstrap-modal.css" rel="stylesheet" />
    <link href="{{STATIC_URL}}TelstraApp/css/chosen.css" rel="stylesheet" />
    <link href="{{STATIC_URL}}TelstraApp/css/slider.css" rel="stylesheet" />
    <link href="{{STATIC_URL}}TelstraApp/css/bootstrap-tour.css" rel="stylesheet" />

	<!--[if IE 7]>
	  <link rel="stylesheet" href="css/font-awesome-ie7.min.css">
	<![endif]-->

  </head>

  <body>


  <div class="modal hide" id="activate-dialog">
    <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal">×</button>
      <h3>Activating Gateway Service</h3>
    </div>
      <div class="modal-body">
        <div class="row-fluid">
          <div class="span2 hidden-phone">
            <i class="icon-cloud-upload icon-4x green"></i> 
          </div>
          <div class="span10">
          <p>Activating Gateway Service...</p>
          <div class="progress progress-striped active">
            <div id="progress" class="bar" style="width: 0%;"></div>
          </div>
          <p><strong>Status:</strong> <span id="status_text">Contacting Contrail...</span></p>
        </div>
        </div>
    </div>
    <div class="modal-footer">
      <a href="#" class="btn btn-primary" data-dismiss="modal" id="status_button">Cancel</a>
    </div>
  </div>
  
    <div class="modal hide" id="deactivate-dialog">
    <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal">×</button>
      <h3>Deactivating Gateway Service</h3>
    </div>
      <div class="modal-body">
        <div class="row-fluid">
          <div class="span2 hidden-phone">
            <i class="icon-cloud-upload icon-4x green"></i> 
          </div>
          <div class="span10">
          <p>Deactivating Gateway Service...</p>
          <div class="progress progress-striped active">
            <div id="deprogress" class="bar" style="width: 0%;"></div>
          </div>
          <p><strong>Status:</strong> <span id="destatus_text">Contacting Contrail...</span></p>
        </div>
        </div>
    </div>
    <div class="modal-footer">
      <a href="#" class="btn btn-primary" data-dismiss="modal" id="destatus_button">Cancel</a>
    </div>
  </div>

  <div class="navbar navbar-fixed-top">
    <div class="navbar-inner">
      <div class="container">
   
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </a>
   
        <!-- Be sure to leave the brand out there if you want it shown -->
        <a class="brand" href=""><img src='http://www.telstra.com.au/homepage/images/t-com-logo-blue.png' /></a>
   
        <!-- Everything you want hidden at 940px or less, place within here -->
        <div class="nav-collapse collapse">
           <ul class="nav">
              <li><a href="telstrainternet">Home</a></li>
              <li class="active"><a href="telstrainternet">Gateway Service</a></li>
              <li><a href="telstravpn">Secure VPN</a></li>
              <li class="divider"></li>
              <li><a href="#">Help</a></li>
              <li class="divider"></li>
              <li><a href="#">Logout</a></li>
            </ul>
        </div>
   
      </div>
    </div>
  </div>
  <div style="clear:both; height:60px;"></div>

  <div class="container">
    <div class="alert alert-info">
      <button type="button" class="close" data-dismiss="info">&times;</button>
      <span class="label label-info">Hello!</span> Welcome to your Telstra activation portal!
    </div>
 
  <div class="row-fluid">
     <div class="span3 well customers">
        <ul class="nav nav-list">
          <li class="nav-header">Customers</li>
          <li class="active"><a href="#" data-customer_name="Visy Pty Ltd" data-customer_id="N13405069">Visy Pty Ltd</a></li>
          <li><a href="#" data-customer_name="News Corporation" data-customer_id="N13455069">News Corporation</a></li>
          <li><a href="#" data-customer_name="Domino Pizza" data-customer_id="N15675069">Domino Pizza</a></li>
          <li><a href="#" data-customer_name="Juniper Networks" data-customer_id="N99642959">Juniper Networks</a></li>
        </ul>
      </div>
      <div class="span9">
         <div class="tabbable"> <!-- Only required for left/right tabs -->
          <ul class="nav nav-tabs">
            <li class="active"><a href="#tab1" data-toggle="tab">Customer Details</a></li>
            <li><a href="#tab2" data-toggle="tab">History</a></li>
          </ul>
          <div class="tab-content">
            <div class="tab-pane active" id="tab1">
              <p>
                <dl class="dl-horizontal">
                  <dt>Customer Name</dt>
                  <dd id="customer_name">Visy Pty Ltd</dd>
                  <dt>ID</dt>
                  <dd id="customer_id">N13405069</dd>
                  <dt>Activated Services</dt>
                  <dd id="customer_name">
                    <span class="label">IPVPN</span>
                    <span class="label">IDP</span>
                    <span class="label">URL Filtering</span>
                    <span class="label">AV</span>
                  </dd>
                </dl>

                 <a class="btn btn-success" data-toggle="modal" type="button" href="#activate-dialog">Activate Internet<i class="icon-lock"></i></a> 
              </p>
              <p>
                 <a class="btn btn-danger" data-toggle="modal" type="button" href="#deactivate-dialog">Deactivate Internet<i class="icon-unlock"></i></a> 
              </p>
            </div>
            <div class="tab-pane" id="tab2">
              <p>Customer history</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script type="text/javascript" src="{{STATIC_URL}}TelstraApp/js/bootstrap.js"></script>
    <script type="text/javascript" src="{{STATIC_URL}}TelstraApp/js/bootstrapx-clickover.js"></script>
    <script type="text/javascript" src="{{STATIC_URL}}TelstraApp/js/bootstrap-slider.js"></script>
    <script type="text/javascript" src="{{STATIC_URL}}TelstraApp/js/jquery.toggle.buttons.js"></script>
    <script type="text/javascript">
        function getParam(name) {
            name = name.replace(/[\[]/, "\\\[").replace(/[\]]/, "\\\]");
            var regexS = "[\\?&]" + name + "=([^&#]*)";
            var regex = new RegExp(regexS);
            var results = regex.exec(window.location.href);
            if (results == null)
                return "";
            else
                return results[1];
        }
        
        function getMISOnRampHref() {
        	var id = getParam('config');
            var param = "ratesatt/misonramp?operation=add&config="+id;
            document.getElementById("miaas").href = param;
        }
    </script>
    <script>
        var int;
        var id;
        $(function() {   
          $( "#activate-dialog" ).on('show', function() {
            $("#status_button").text("Cancel");
            id = getParam('config');
            var bar = document.getElementById('progress'),
            time = 0, max = 10,
            int = setInterval(function() {
                bar.style.width = Math.floor(100 * time++ / max) + '%';
                time - 1 == max && clearInterval(int);
            }, 100);

            $.ajax({
              type: "GET",
              url: "ratesatt/misonramp?operation=add&config="+id,
              dataType: 'json',
              success: function(response) {
                if( response.message ) {
                  $("#status_text").html(response.message);
                }
                $("#status_button").text("OK");
              },
              error: function() {
                $("#status_text").html("Completed");
                $("#status_button").text("OK");
              }
            });
          });

          $( "#activate-dialog" ).on('hide', function() {
            clearInterval(int);
            $("#progress").width(0);
            $("#status_text").html("Contacting Contrail...");
          });
          
          
          $(".customers ul li").click( function() {
            $(".customers ul li").removeClass("active");
            $(this).addClass("active");  
          }); 
          $(".customers ul li a").click( function() {
            var data = $(this).data();
            for(var i in data){
              $("#" + i).html(data[i]);
            }
          });
       });
    </script>
    
    <script>
        var int;
        var id;
        $(function() {   
              $( "#deactivate-dialog" ).on('show', function() {
                $("#destatus_button").text("Cancel");
                id = getParam('config');
                var bar = document.getElementById('deprogress'),
                time = 0, max = 10,
                int = setInterval(function() {
                    bar.style.width = Math.floor(100 * time++ / max) + '%';
                    time - 1 == max && clearInterval(int);
                }, 100);

                $.ajax({
                  type: "GET",
                  url: "cancel?operation=del&config="+id,
                  dataType: 'json',
                  success: function(response) {
                    if( response.message ) {
                      $("#destatus_text").html(response.message);
                    }
                    $("#destatus_button").text("OK");
                  },
                  error: function() {
                    $("#destatus_text").html("Completed");
                    $("#destatus_button").text("OK");
                  }
                });
              });

              $( "#deactivate-dialog" ).on('hide', function() {
                clearInterval(int);
                $("#deprogress").width(0);
                $("#destatus_text").html("Contacting Contrail...");
              });
              
              $(".customers ul li").click( function() {
                  $(".customers ul li").removeClass("active");
                  $(this).addClass("active");  
                }); 
                $(".customers ul li a").click( function() {
                  var data = $(this).data();
                  for(var i in data){
                    $("#" + i).html(data[i]);
                  }
                });
             });
          </script>
  </body>
</html>
